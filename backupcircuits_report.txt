--- 
- name: Backup Circuit Report
  hosts: routers 
  connection: local

  tasks:
    - name: Execute commands
      ios_command:
        commands: 
          - show run | s hostname
          - show ip interface brief
	  - show interface description
	  - show ip route | i Gateway
	  - show track
	  - show clock      
      register: result    

    - name: Saving the result to text file
      copy: 
        content: "\n{{ '\n\n'.join((result.stdout[0], result.stdout[1], result.stdout[2], result.stdout[3], result.stdout[4], result.stdout[5])) }}"  
        dest: "/etc/ansible/myplaybook/backup_circuits_report/devices/backup_circuits_report_of_{{ inventory_hostname }}.txt"   
    
    - name: 
      assemble:    
        src: /etc/ansible/myplaybook/backup_circuits_report/devices
        dest: /etc/ansible/myplaybook/backup_circuits_report/merge_files/backup_circuits_report.txt